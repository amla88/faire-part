import{a as $}from"./chunk-PNMGDGOO.js";import{a as N,b as I}from"./chunk-ZZPVTA7Y.js";import"./chunk-KWMSRXNQ.js";import"./chunk-XYN5C5AP.js";import"./chunk-JPTBIBXE.js";import"./chunk-LKTWXCPZ.js";import{Aa as E,Ba as T,Ca as z,Ea as F,n as S,ta as k,wa as O,xa as D,ya as w,za as A}from"./chunk-4THFQO72.js";import{Jb as g,Kb as f,Mb as b,Mc as y,Nb as v,Ob as h,Pb as i,Qb as r,Rb as x,ab as u,ac as P,cb as d,cc as c,ja as C,qc as l,rc as s,ub as M,za as p}from"./chunk-XRA3D6DW.js";import{m as _}from"./chunk-SIIEGW5O.js";var j=(t,e)=>e.key;function R(t,e){t&1&&(i(0,"div",4),x(1,"mat-progress-spinner",5),i(2,"span"),l(3,"Chargement..."),r()())}function B(t,e){if(t&1&&(i(0,"div",6),l(1),r()),t&2){let o=c(2);d(),s(o.error())}}function U(t,e){t&1&&(i(0,"div",7),l(1,"Aucune photo n'a encore ete transferee. Lance-toi\xA0!"),r())}function G(t,e){if(t&1&&(i(0,"article",9)(1,"a",10),x(2,"img",11),r(),i(3,"div",12)(4,"strong",13),l(5),r(),i(6,"span",14),l(7),r(),i(8,"span",15),l(9),r()()()),t&2){let o=e.$implicit,n=c(4);d(),h("href",o.url,u),d(),h("src",o.url,u)("alt",o.name),d(3),s(o.name),d(2),s(n.formatDate(o.lastModified)),d(2),s(n.formatSize(o.size))}}function H(t,e){if(t&1&&(i(0,"div",8),b(1,G,10,6,"article",9,j),r()),t&2){let o=c(3);d(),v(o.photos())}}function K(t,e){if(t&1&&g(0,U,2,0,"div",7)(1,H,3,0,"div",8),t&2){let o=c(2);f(o.hasPhotos()?1:0)}}function q(t,e){if(t&1&&g(0,B,2,1,"div",6)(1,K,2,1),t&2){let o=c();f(o.error()?0:1)}}var at=(()=>{let e=class e{constructor(){this.photoService=C($),this.photos=p([]),this.loading=p(!1),this.error=p(null),this.lastLoadedAt=p(null),this.hasPhotos=y(()=>this.photos().length>0),this.dateFormatter=new Intl.DateTimeFormat("fr-FR",{dateStyle:"medium",timeStyle:"short"}),this.formatDate=n=>{if(!n)return"Date inconnue";let a=new Date(n);return Number.isNaN(a.getTime())?"Date inconnue":this.dateFormatter.format(a)},this.formatSize=n=>{if(!n)return"0 o";let a=n/1024;if(a<1024)return`${a.toFixed(1)} Ko`;let m=a/1024;return m<1024?`${m.toFixed(1)} Mo`:`${(m/1024).toFixed(2)} Go`},this.refresh()}refresh(){return _(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let n=yield this.photoService.listFamilyPhotos();this.photos.set(n),this.lastLoadedAt.set(new Date)}catch(n){let a=n instanceof Error?n.message:"Impossible de charger votre album";this.error.set(a)}finally{this.loading.set(!1)}})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=M({type:e,selectors:[["app-photo-album"]],decls:13,vars:2,consts:[[1,"page-wrapper"],["appearance","outlined"],["align","end",1,"card-actions"],["mat-stroked-button","",3,"click","disabled"],[1,"loading"],["diameter","32","mode","indeterminate"],[1,"error"],[1,"empty"],[1,"album-grid"],[1,"photo-card"],["target","_blank","rel","noopener",1,"image-link",3,"href"],["loading","lazy",3,"src","alt"],[1,"photo-meta"],[1,"photo-name"],[1,"photo-date"],[1,"photo-size"]],template:function(a,m){a&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),l(4,"Mon album photo"),r(),i(5,"mat-card-subtitle"),l(6,"Retrouve toutes les photos envoyees par ta famille."),r()(),i(7,"mat-card-actions",2)(8,"button",3),P("click",function(){return m.refresh()}),l(9," Rafraichir "),r()(),i(10,"mat-card-content"),g(11,R,4,0,"div",4)(12,q,2,1),r()()()),a&2&&(d(8),h("disabled",m.loading()),d(3),f(m.loading()?11:12))},dependencies:[S,F,D,T,A,z,E,w,O,k,I,N],styles:["[_nghost-%COMP%]{display:block}.page-wrapper[_ngcontent-%COMP%]{max-width:1100px;margin:24px auto;padding:0 16px 32px}.card-actions[_ngcontent-%COMP%]{padding:0 16px 8px}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:32px 0;color:#5f6368}.error[_ngcontent-%COMP%]{margin:16px 0;padding:12px 16px;border-radius:12px;background-color:#fde7e7;color:#b3261e;font-weight:600}.empty[_ngcontent-%COMP%]{padding:40px 0;text-align:center;color:#5f6368;font-size:.95rem}.album-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;margin-top:24px}.photo-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:16px;overflow:hidden;background:var(--mat-card-background-color, #fff);box-shadow:0 1px 3px #1018281f}.image-link[_ngcontent-%COMP%]{position:relative;display:block;padding-top:68%;background:#f5f5f5}.image-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}.photo-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding:14px 16px 18px;font-size:.85rem}.photo-name[_ngcontent-%COMP%]{font-size:.95rem;color:#1f2933}.photo-date[_ngcontent-%COMP%], .photo-size[_ngcontent-%COMP%]{color:#5f6368}@media (max-width: 599px){.page-wrapper[_ngcontent-%COMP%]{padding:0 12px 24px}.album-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}}"],changeDetection:0});let t=e;return t})();export{at as PhotoAlbumComponent};
